<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script src="app.js" defer></script>
    <title>Train Registration Form</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script> 
<style> 
.bg-image { 
    width: 100%; 
    height: 100%; 
    background-image: url('https://th.bing.com/th/id/R.d579c3a6fd3605110f7ae838a9bf98c2?rik=a7Xi9kIeesLEnQ&riu=http%3a%2f%2fwww.railpictures.net%2fimages%2fd1%2f5%2f2%2f2%2f1522.1372372289.jpg&ehk=pKdEl1NQuF3gmWEDURgsZ3IStBx9SQezHnBajPyHb7Y%3d&risl=&pid=ImgRaw&r=0'); 
    background-size: 100% 100%;  
    background-repeat: no-repeat;
}
        

#form{
    width:600px;px;;
    margin:20vh auto 0 auto;
    background-color: rgba(245, 245, 245, 0.329);
    border-radius: 5px;
    padding:30px;
}

h1{
    text-align: center;
    color:#792099;
}

#form button{
    background-color: #792099;
    color:white;
    border: 1px solid #792099;
    border-radius: 10px;
    padding:10px;
    margin:20px 0px;
    cursor:pointer;
    font-size:20px;
    width: 100%;
}

.input-group{
    display:flex;
    flex-direction: column;
    margin-bottom: 15px;
}

.input-group input{
    border-radius: 5px;
    font-size:20px;
    margin-top:5px;
    padding:10px;
    border:1px solid rgb(34,193,195) ;
}

.input-group input:focus{
    outline:0;
}

.input-group .error{
    color:rgb(242, 18, 18);
    font-size:16px;
    margin-top: 5px;
}

.input-group.success input{
    border-color: #0cc477;
}

.input-group.error input{
    border-color:rgb(206, 67, 67);
}
.ph.error {
    color:rgb(242, 18, 18);
    font-size:16px;
    margin-top: 5px;
}
.ph.success input{
    border-color: #0cc477;
}
.ph.error input{
    border-color:rgb(206, 67, 67);
}


    </style>
</head>
<body>
   

    <div class="bg-image">
    <div class="container">
<form action="http://localhost:7111" method="GET" id="form" name="f1">
      
            <h1>Registration Form</h1>
<div class="input-group">
  <label class="form-group" for="destination">Reservation Quota</label><br>
 <select name="des" id="des" required>
            <option value="">Please Select</option>
            <option value="First Class">First Class</option>
            <option value="Second Class">Second Class</option>
            <option value="Third Class">Third Class</option>
            <option value="Fourth Class">Fourth Class</option>
          </select></div>
            <div class="input-group">
                <label for="trainname">Train Name</label>
                <input type="text" id="tname" name="tname" required onclick="validatefname()" required>
                <div class="error" ></div>
            </div>
            <div class="input-group">
                <label for="lastname">Journey From </label>
                <input type="text" id="lname" name="lname" required onclick="validatelname()">
                <div class="error"></div>
            </div>
 <div class="input-group">
                <label for="lastname"> Journey To </label>
                <input type="text" id="lname" name="lname" required onclick="validatelname()">
                <div class="error"></div>
            </div>
            <div class="input-group">
                <label for="email">Email</label>
                <input type="text" id="email" name="email" required id="email">
                <div class="error"></div>
            </div>
           
                <label class="text-black" for="fdob">Departure/Journey Date</label>&nbsp;&nbsp;
                <input type="date" class="form-control" id="dob" >
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                 <div class="input-group">
                <label for="firstname">Passengers Name</label>
                <input type="text" id="fname" name="fname" required onclick="validatefname()" required>
                <div class="error" ></div>
            </div>
 <div class="ph">
                    <label class="text-black" for="age">Age </label><br>
                    
              <input type="tel" placeholder="ex : 23" name="age" id="age">
                    <div class="error"></div>
                  </div><br>
<label class="form-group" for="destination">Berth Choice</label><br>
                <select name="des" id="des" required>
            <option value="">Please Select</option>
            <option value="Select">Select</option>
            <option value="Lower">Lower</option>
            <option value="Middle">Middle</option>
            <option value="Upper">Upper</option>
            <option value="Side Lower">Side Lower</option>
            <option value="Side Upper">Side Upper</option>
          </select> 
     


                <label required="">Gender :</label>
                  <input type="radio" id="male" name="gender" value="male">
                  <label for="male">Male</label>
                  <input type="radio" id="female" name="gender" value="female">
                  <label for="female">Female</label>
                  <input type="radio" id="others" name="gender" value="others">
                  <label for="others">Others</label>
                  
                <br>
                  <br>
                  <div class="ph">
                    <label class="text-black" for="pn">phone no</label>
                    <input type="text"value="+91"size="1"disabled>
              <input type="tel" placeholder="0123456789" name="pn" id="pn">
                    <div class="error"></div>
                  </div>

                    
                <br>
                  
            <div class="input-group">
                <label for="password">Address</label>
                <textarea id="add" name="add"></textarea>
                <div class="error"></div>
            </div>
            <button type="submit" >Register</button>
        </form>
    </div>
    </div>
    <script>
        const form = document.getElementById('form')
        const tname = document.getElementById('tname');

const fname = document.getElementById('fname');
const lname = document.getElementById('lname');
const email = document.getElementById('email');
const pn = document.getElementById('pn');
const add = document.getElementById('add');

const age = document.getElementById('age');




form.addEventListener('submit',(e)=>{
    
    if(!validateInputs()){
        e.preventDefault();
    }
    else{
        alert("Submitted Successfully");
    }
})

function validateInputs(){
    const tnameValue = tname.value.trim();
    const fnameValue = fname.value.trim();
    const lnameValue = lname.value.trim();
    const emailVal = email.value.trim();
    const pnValue = pn.value.trim();
 const ageValue = age.value.trim();
    const addValue = add.value;
    
    var regName = /\d+$/g;

   
  
 
    let success = true
    if(tnameValue === ''){
        success = false;
          setError(tname, 'Train name cannot be blank');
        }
        else if(regName.test( tname )){
            success = false;
            setError(tname, 'Train name should be alphebet');
            
        }
        else{
            setSuccess(tname);
        }

    if(fnameValue === ''){
        success = false;
          setError(fname, 'First name cannot be blank');
        }
        else if(regName.test( fname )){
            success = false;
            setError(fname, 'First name should be alphebet');
            
        }
        else{
            setSuccess(fname);
        }

    if(lnameValue === ''){
            success = false;
          setError(lname, 'Last name cannot be blank');
        }
        else{
          setSuccess(lname);
        }

    if(emailVal===''){
        success = false;
        setError(email,'Email is required')
    }
    else if(!validateEmail(emailVal)){
        success = false;
        setError(email,'Please enter a valid email')
    }
    else{
        setSuccess(email)
    }

    if(ageValue === ''){
        success = false;
        setError(age,'Age cannot be blank')
    }
    
    }
    else{
        setSuccess(age);
 if(pnValue === ''){
        success = false;
        setError(pn,'Phone number cannot be blank')
    }
    else if(pn.length<10||pn.length>10){
        success = false;
        setError(pn,'Phone number should be in 10 numbers!')

    }
    else{
        setSuccess(pn);
    }
    if(addValue===''){
        success = false;
        setError(add,'Address cannot be blank!')
    }
    else{
        setSuccess(add)
    }

    if(rollNumberVal===''){
        success = false;
        setError(rollNumber,'UserId should not be blank!')
    }
    else if(!validateroll(rollNumberVal)){
        success=false;
        setError(rollNumber,'Enter Valid User Id')
    }
    else{
        setSuccess(rollNumber)
    }
    if(pnValue===''){
        success = false;
        setError(pn,'Phone NUmber should not be blank!')
    }
    else if(!validatepn(pnValue)){
        success=false;
        setError(pn,'Phone Number should be in 10 numbers')
    }
    else{
        setSuccess(pn)
    }
    
return success;

}
//element - password, msg- pwd is reqd
function setError(element,message){
    const inputGroup = element.parentElement;
    const errorElement = inputGroup.querySelector('.error')
    errorElement.innerText = message;
    inputGroup.classList.add('error')
    inputGroup.classList.remove('success')
}

function setSuccess(element){
    const inputGroup = element.parentElement;
    const errorElement = inputGroup.querySelector('.error')

    errorElement.innerText = '';
    inputGroup.classList.add('success')
    inputGroup.classList.remove('error')
}

const validateEmail = (email) => {
    return String(email)
      .toLowerCase()
      .match(
        /^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
      );
  };

  const validateroll = (rollNumber) => {
    return String(rollNumber)
      .toUpperCase()
      .match(
        /^23TRA\d{3}$/
      );
  };

  const validatepn= (pn) => {
    return String(pn)
      .match(
        /^\d{10}$/
      );
  };


  function validatefname(){
    const fnameValue = fname.value.trim();
    var regn = /\d+$/g;

    let success = true

if(fnameValue === ''){
    success = false;
      setError(fname, 'First name cannot be blank');
      document.getElementById('fname').focus();
    }
    else if(regn.test( fname )){
        success = false;
        setError(fname, 'First name should be alphebet');
        document.getElementById('fname').focus();
    }
    else{
        setSuccess(fname);
        document.getElementById('fname').focus();
        
        
    }
    return success

  }
  function validatelname(){
    const lnameValue = lname.value.trim();
    let success = true
    if(lnameValue === ''){
            success = false;
          setError(lname, 'Last name cannot be blank');
        }
        else{
          setSuccess(lname);
        }
        return success

  }


 
    </script>
</body>
</html>